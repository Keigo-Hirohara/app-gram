---
title: 'ã©ã†ä½¿ã†ï¼Ÿï¼Ÿjestã§localStorageã‚’ä½¿ã†æ–¹æ³•'
emoji: 'ğŸ‘'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['jest', 'localStorage']
published: true
---

MERN ã‚¹ã‚¿ãƒƒã‚¯ã§ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã„ã‚‹éš›ã€ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…æ™‚ã« localStorage ã‚’ä½¿ã„ã¾ã—ãŸã€‚

jwt ã®æ¤œè¨¼ã®ãŸã‚ã« loalStorage ã‚’ä½¿ã£ãŸã®ã§ã™ãŒã€jest ã§ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹ã¨ãã€localStrage ã‚’ä½¿ã†ãŸã‚ã«äº‹å‰è¨­å®šãŒå¿…è¦ã ã£ãŸã®ã§è¨˜éŒ²ã—ã¦ãŠãã¾ã™ã€‚

## ã‚³ãƒ¼ãƒ‰

```

var localStorageMock = (function() {
    let store = {};

    return {
        getItem: function(key) {
            return store[key] || null;
        },
        setItem: function(key, value) {
            store[key] = String(value);
        },
        clear: function() {
            store = {};
        }
    };

  })();

  Object.defineProperty(window, 'localStorage', {
     value: localStorageMock
  });
```

ä¸Šè¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¥½ããªå ´æ‰€ã«ä½œæˆã—ã€package.json ã«ã¦ã€

```
"jest": {
    "setupFiles": [
      "./browserMocks.js"
    ],
    "testURL": "ã‚µãƒ¼ãƒãƒ¼ã®URL"
  },
```

ã¨è¨˜è¿°ã—ã¦ã¿ã¦ãã ã•ã„ï¼ï¼ˆbrowserMock.json ã®ãƒ‘ã‚¹ã‚‚è‡ªåˆ†ã®çŠ¶æ³ã«åˆã‚ã›ã¦ã¿ã¦ãã ã•ã„ï¼‰

```
// ãƒ‡ãƒ¼ã‚¿ã®ã‚»ãƒƒãƒˆ
localStorage.setItem("<ã‚­ãƒ¼>", <å€¤>);
// ãƒ‡ãƒ¼ã‚¿ã®å‚ç…§
localStorage.setItem("<ã‚­ãƒ¼>", <å€¤>);
```
